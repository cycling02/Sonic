---
alwaysApply: false
description: 
---
# Sonic 音乐播放器 - 功能清单

## 项目概述

**Sonic** 是一款本地音乐播放器 Android 应用，采用 **Clean Architecture + MVI** 架构模式，使用 **Jetpack Compose** 构建 UI，整体设计风格模仿 iOS 界面风格。

### 技术栈
- **语言**: Kotlin
- **UI**: Jetpack Compose + Material 3
- **架构**: Clean Architecture (app/data/domain/presentation 四层)
- **依赖注入**: Hilt
- **数据库**: Room
- **媒体播放**: Media3 ExoPlayer
- **图片加载**: Coil 3
- **AI 功能**: DeepSeek API 集成
- **导航**: Jetpack Navigation Compose + Kotlin Serialization

---

## 已实现功能

### 1. 首页模块 (HomeScreen)
- [x] 快速访问入口（歌曲、专辑、歌手、播放列表）
- [x] 最近播放歌曲展示
- [x] 热门专辑展示
- [x] 热门歌手展示
- [x] 最近添加歌曲展示
- [x] iOS 风格大标题导航栏

### 2. 歌曲模块 (SongsScreen)
- [x] 歌曲列表展示（列表/网格视图切换）
- [x] 多维度排序（标题、艺术家、专辑、时长、添加日期）
- [x] 升序/降序切换
- [x] 点击歌曲播放

### 3. 专辑模块 (AlbumsScreen / AlbumDetailScreen)
- [x] 专辑列表展示
- [x] 专辑详情页（专辑封面、艺术家、年份、歌曲数）
- [x] 专辑内歌曲列表
- [x] 全部播放 / 随机播放
- [x] AI 专辑解读功能

### 4. 歌手模块 (ArtistsScreen / ArtistDetailScreen)
- [x] 歌手列表展示
- [x] 歌手详情页（头像、专辑数、歌曲数）
- [x] 歌手所有歌曲列表
- [x] 全部播放 / 随机播放
- [x] AI 歌手介绍功能

### 5. 播放列表模块 (PlaylistsScreen / PlaylistDetailScreen)
- [x] 播放列表列表展示
- [x] 创建新播放列表
- [x] 播放列表详情页
- [x] 播放列表内歌曲展示
- [x] 全部播放 / 随机播放
- [x] 删除播放列表

### 6. 音乐播放器模块 (PlayerScreen / MiniPlayer / PlayerManager)
- [x] 全屏播放界面
- [x] 专辑封面展示
- [x] 歌曲标题、艺术家显示
- [x] 播放进度条（可拖动）
- [x] 播放/暂停控制
- [x] 上一首/下一首切换
- [x] 循环模式（关闭/单曲循环/列表循环）
- [x] 随机播放模式
- [x] 播放队列查看
- [x] MiniPlayer 底部迷你播放器
- [x] 后台播放服务

### 7. 音乐扫描模块 (ScanScreen)
- [x] 存储权限请求
- [x] 本地音乐扫描
- [x] 扫描进度显示（查询 MediaStore / 保存到数据库）
- [x] 扫描结果统计（歌曲数、专辑数、歌手数、耗时）
- [x] 重新扫描

### 8. 排除文件夹模块 (ExcludeFoldersScreen)
- [x] 添加要排除的文件夹
- [x] 排除文件夹列表展示
- [x] 删除排除项
- [x] 扫描时自动跳过排除的文件夹

### 9. 设置模块 (SettingsScreen)
- [x] 扫描本地音乐入口
- [x] 排除文件夹管理入口
- [x] DeepSeek API 配置入口
- [x] 主题模式切换（跟随系统/浅色/深色）

### 10. AI 信息模块 (AiInfoCard / AiRepositoryImpl)
- [x] 集成 DeepSeek AI API
- [x] 歌曲信息解读（创作背景、歌词主题、音乐风格等）
- [x] 歌手介绍（基本信息、音乐风格、代表作品、职业生涯等）
- [x] 专辑介绍（创作背景、专辑主题、代表曲目、专辑评价等）
- [x] AI 信息本地缓存
- [x] API Key 配置管理
- [x] Markdown 格式内容渲染

---

## 待实现功能

### 1. 歌词功能
- [ ] 歌词显示（同步歌词滚动）
- [ ] 歌词编辑
- [ ] 在线歌词获取
- [ ] 歌词翻译

### 2. 搜索功能
- [ x]] 全局搜索（歌曲、专辑、歌手）
- [ x]] 搜索历史
- [ x]] 搜索建议
- [ x]] 按分类筛选搜索结果

### 3. 播放增强
- [ ] 均衡器 (EQ) 设置
- [ ] 睡眠定时器
- [ ] 播放速度调节
- [ ] 歌曲收藏/喜欢功能
- [ ] 播放统计（最常播放、播放次数）
- [ ] 播放历史记录

### 4. 播放列表增强
- [x] 播放列表添加歌曲
- [x] 播放列表编辑（重命名）
- [x] 播放列表内删除歌曲
- [ ] 智能播放列表（根据播放次数自动生成）
- [ ] 播放列表排序

### 5. 歌曲管理
- [ ] 歌曲详情编辑（标题、艺术家、专辑）
- [ ] 批量删除歌曲
- [ ] 歌曲分享
- [ ] 歌曲详情查看（文件路径、格式、比特率等）

### 6. 通知与小组件
- [ ] 通知栏播放控制
- [ ] 通知栏封面显示
- [ ] 桌面小组件（4x1, 4x2, 4x4）
- [ ] 锁屏播放控制

### 7. 数据备份
- [ ] 播放列表导出/导入
- [ ] 设置备份/恢复
- [ ] 播放历史导出

### 8. 其他功能
- [ ] 歌曲铃声设置
- [ ] 音乐文件夹浏览
- [ ] 最近播放队列恢复
- [ ] 批量选择操作
- [ ] 歌曲添加到播放列表（从歌曲列表）
- [ ] 拖拽排序播放队列
- [ ] 歌词海报分享

---

## 项目模块架构

```
Sonic/
├── app/           # 应用入口模块
│   ├── MainActivity.kt
│   ├── SonicApplication.kt
│   └── MainViewModel.kt
├── data/          # 数据层
│   ├── local/     # 本地数据源
│   │   ├── database/    # Room 数据库
│   │   ├── scanner/     # 音乐扫描器
│   │   └── mediastore/  # MediaStore 查询
│   ├── remote/    # 远程数据源
│   │   └── api/   # DeepSeek API
│   ├── player/    # 播放器管理
│   └── repository/ # 仓库实现
├── domain/        # 领域层
│   ├── model/     # 领域模型
│   ├── repository/ # 仓库接口
│   └── usecase/   # 用例
└── presentation/  # 表现层
    ├── home/      # 首页
    ├── songs/     # 歌曲
    ├── albums/    # 专辑
    ├── artists/   # 歌手
    ├── playlists/ # 播放列表
    ├── player/    # 播放器
    ├── scan/      # 扫描
    ├── settings/  # 设置
    ├── ai/        # AI 功能
    └── components/ # 公共组件
```

---

## 数据流架构

```
┌─────────────────────────────────────────────────────────────┐
│                     Presentation Layer                       │
│  ┌─────────┐    ┌──────────────┐    ┌───────────────────┐   │
│  │ Screen  │───▶│  ViewModel   │───▶│ Contract (State)  │   │
│  └─────────┘    └──────────────┘    └───────────────────┘   │
│        │                │                                    │
│        │ Intent         │ UseCase                            │
│        ▼                ▼                                    │
└─────────────────────────────────────────────────────────────┘
                         │
                         ▼
┌─────────────────────────────────────────────────────────────┐
│                      Domain Layer                            │
│  ┌──────────────┐    ┌──────────────────────────────────┐   │
│  │   UseCase    │───▶│        Repository Interface      │   │
│  └──────────────┘    └──────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────┘
                               │
                               ▼
┌─────────────────────────────────────────────────────────────┐
│                       Data Layer                             │
│  ┌──────────────────┐    ┌──────────────────────────────┐   │
│  │ Repository Impl  │───▶│  Data Sources (DB/API/File)  │   │
│  └──────────────────┘    └──────────────────────────────┘   │
│           │                        │                         │
│           ▼                        ▼                         │
│  ┌──────────────────┐    ┌──────────────────────────────┐   │
│  │     Room DB      │    │   MediaStore / DeepSeek API  │   │
│  └──────────────────┘    └──────────────────────────────┘   │
└─────────────────────────────────────────────────────────────┘
```

---

## 代码规范

### MVI 架构模式
每个功能模块包含：
- `*Screen.kt` - UI 界面
- `*ViewModel.kt` - 视图模型
- `*Contract.kt` - UiState 和 Intent/Effect 定义

### 命名规范
- State: `*UiState`
- Intent: `*Intent`
- Effect: `*Effect`
- ViewModel: `*ViewModel`

### UI 风格
- iOS 风格设计
- 大标题导航栏
- 圆角卡片
- 分组列表
